<!DOCTYPE html>
<html>
<head>
    <title>Admin Panel</title>
</head>
<body>
    <h1>Admin Panel</h1>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <p style="color: green;">{{ message }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}
    
    <form method="POST" enctype="multipart/form-data">
        <p>Image: <input type="file" name="image" accept="image/*"></p>
        <p>Season: 
            <select name="season">
                {% for season in seasons %}
                    <option value="{{ season }}">{{ season }}</option>
                {% endfor %}
                <option value="season{{ seasons|length + 1 }}">Season {{ seasons|length + 1 }}</option>
            </select>
        </p>
        <p>Required Level: <input type="number" name="required_level" value="0" min="0"></p>
        <p><input type="submit" value="Upload"></p>
    </form>

    <h2>Existing Images</h2>
    <table border="1">
        <tr>
            <th>Season</th>
            <th>Filename</th>
            <th>Required Level</th>
            <th>Preview</th>
        </tr>
        {% for image in all_images %}
        <tr>
            <td>{{ image.season }}</td>
            <td>{{ image.filename }}</td>
            <td>{{ image.required_level }}</td>
            <td><img src="{{ url_for('static', filename=image.season + '/' + image.filename) }}" 
                     alt="{{ image.filename }}" style="max-width: 100px;"></td>
        </tr>
        {% endfor %}
    </table>

    <p><a href="{{ url_for('index') }}">Back to Home</a></p>
</body>
</html>